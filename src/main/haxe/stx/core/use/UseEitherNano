package stx.core.use;

class UseEithercore{
  public function zip<T,TT,E>(that:Res<TT,E>,self:Res<T,E>):Res<Couple<T,TT>,E>{
    return switch([self,that]){
      case [Failure(e),Failure(ee)]     : Failure(e.next(ee));
      case [Failure(e),_]               : Failure(e);
      case [_,Failure(e)]               : Failure(e);
      case [Success(t),Success(tt)]     : Success(__.couple(t,tt));
    }
  }
}